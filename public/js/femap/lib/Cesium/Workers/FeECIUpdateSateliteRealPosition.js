/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2017 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
/**
  @license
  when.js - https://github.com/cujojs/when

  MIT License (c) copyright B Cavalier & J Hann

 * A lightweight CommonJS Promises/A and when() implementation
 * when is part of the cujo.js family of libraries (http://cujojs.com/)
 *
 * Licensed under the MIT License at:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * @version 1.7.1
 */

!function(){!function(t){"use strict";t("ThirdParty/when",[],function(){function t(t,e,n,r){return o(t).then(e,n,r)}function o(t){var o,e;return t instanceof n?o=t:i(t)?(e=s(),t.then(function(t){e.resolve(t)},function(t){e.reject(t)},function(t){e.progress(t)}),o=e.promise):o=r(t),o}function e(o){return t(o,a)}function n(t){this.then=t}function r(t){return new n(function(e){try{return o(e?e(t):t)}catch(t){return a(t)}})}function a(t){return new n(function(e,n){try{return n?o(n(t)):a(t)}catch(t){return a(t)}})}function s(){function t(t,o,e){return f(t,o,e)}function e(t){return l(t)}function r(t){return l(a(t))}function i(t){return p(t)}var c,h,u,d,f,p,l;return h=new n(t),c={then:t,resolve:e,reject:r,progress:i,promise:h,resolver:{resolve:e,reject:r,progress:i}},u=[],d=[],f=function(t,o,e){var n,r;return n=s(),r="function"==typeof e?function(t){try{n.progress(e(t))}catch(t){n.progress(t)}}:function(t){n.progress(t)},u.push(function(e){e.then(t,o).then(n.resolve,n.reject,r)}),d.push(r),n.promise},p=function(t){return M(d,t),t},l=function(t){return t=o(t),f=t.then,l=o,p=m,M(u,t),d=u=b,t},c}function i(t){return t&&"function"==typeof t.then}function c(o,e,n,r,a){return g(2,arguments),t(o,function(o){function i(t){M(t)}function c(t){l(t)}var h,u,d,f,p,l,M,g,x,v;if(x=o.length>>>0,h=Math.max(0,Math.min(e,x)),d=[],u=x-h+1,f=[],p=s(),h)for(g=p.progress,M=function(t){f.push(t),--u||(l=M=m,p.reject(f))},l=function(t){d.push(t),--h||(l=M=m,p.resolve(d))},v=0;v<x;++v)v in o&&t(o[v],c,i,g);else p.resolve(d);return p.then(n,r,a)})}function h(t,o,e,n){function r(t){return o?o(t[0]):t[0]}return c(t,1,r,e,n)}function u(t,o,e,n){return g(1,arguments),f(t,x).then(o,e,n)}function d(){return f(arguments,x)}function f(o,e){return t(o,function(o){var n,r,a,i,c,h;if(a=r=o.length>>>0,n=[],h=s(),a)for(i=function(o,r){t(o,e).then(function(t){n[r]=t,--a||h.resolve(n)},h.reject)},c=0;c<r;c++)c in o?i(o[c],c):--a;else h.resolve(n);return h.promise})}function p(o,e){var n=y.call(arguments,1);return t(o,function(o){var r;return r=o.length,n[0]=function(o,n,a){return t(o,function(o){return t(n,function(t){return e(o,t,a,r)})})},v.apply(o,n)})}function l(o,e,n){var r=arguments.length>2;return t(o,function(t){return t=r?n:t,e.resolve(t),t},function(t){return e.reject(t),a(t)},e.progress)}function M(t,o){for(var e,n=0;e=t[n++];)e(o)}function g(t,o){for(var e,n=o.length;n>t;)if(null!=(e=o[--n])&&"function"!=typeof e)throw new Error("arg "+n+" must be a function")}function m(){}function x(t){return t}var v,y,b;return t.defer=s,t.resolve=o,t.reject=e,t.join=d,t.all=u,t.map=f,t.reduce=p,t.any=h,t.some=c,t.chain=l,t.isPromise=i,n.prototype={always:function(t,o){return this.then(t,t,o)},otherwise:function(t){return this.then(b,t)},yield:function(t){return this.then(function(){return t})},spread:function(t){return this.then(function(o){return u(o,function(o){return t.apply(b,o)})})}},y=[].slice,v=[].reduce||function(t){var o,e,n,r,a;if(a=0,o=Object(this),r=o.length>>>0,e=arguments,e.length<=1)for(;;){if(a in o){n=o[a++];break}if(++a>=r)throw new TypeError}else n=e[1];for(;a<r;++a)a in o&&(n=t(n,o[a],a,o));return n},t})}("function"==typeof define&&define.amd?define:function(t){"object"==typeof exports?module.exports=t():this.when=t()}),define("Core/defined",[],function(){"use strict";function t(t){return void 0!==t&&null!==t}return t}),define("Core/freezeObject",["./defined"],function(t){"use strict";var o=Object.freeze;return t(o)||(o=function(t){return t}),o}),define("Core/defaultValue",["./freezeObject"],function(t){"use strict";function o(t,o){return void 0!==t&&null!==t?t:o}return o.EMPTY_OBJECT=t({}),o}),define("Core/formatError",["./defined"],function(t){"use strict";function o(o){var e,n=o.name,r=o.message;e=t(n)&&t(r)?n+": "+r:o.toString();var a=o.stack;return t(a)&&(e+="\n"+a),e}return o}),define("Workers/createTaskProcessorWorker",["../ThirdParty/when","../Core/defaultValue","../Core/defined","../Core/formatError"],function(t,o,e,n){"use strict";function r(o,e,n){try{return o(e,n)}catch(o){return t.reject(o)}}function a(a){var s;return function(i){var c=i.data,h=[],u={id:c.id,result:void 0,error:void 0};return t(r(a,c.parameters,h)).then(function(t){u.result=t}).otherwise(function(t){t instanceof Error?u.error={name:t.name,message:t.message,stack:t.stack}:u.error=t}).always(function(){e(s)||(s=o(self.webkitPostMessage,self.postMessage)),c.canTransferArrayBuffer||(h.length=0);try{s(u,h)}catch(t){u.result=void 0,u.error="postMessage failed with error: "+n(t)+"\n  with responseMessage: "+JSON.stringify(u),s(u)}})}}return a}),define("Workers/FeECIUpdateSateliteRealPosition",["./createTaskProcessorWorker"],function(t){"use strict";function o(t,o){var n=t,i=[],c=e(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds());c+=1.15741e-8*n.getUTCMilliseconds();for(var h=(r.gstime_from_jday(c),0);h<s.length;h++){var u,d,f,p=1440*(c-a[s[h].sateObjArrIndex].extra.jdsatepoch),l=r.sgp4(a[s[h].sateObjArrIndex].extra,p);try{u=1e3*l.position.x,d=1e3*l.position.y,f=1e3*l.position.z}catch(t){u=0,d=0,f=0,0,0,0,0}var M={geoPosition:{x:u,y:d,z:f},sateObjArrIndex:s[h].sateObjArrIndex};i.push(M)}return{timestamp:o,satelineInfoArr:i}}function e(t,o,e,n,r,a){return 367*t-Math.floor(7*(t+Math.floor((o+9)/12))*.25)+Math.floor(275*o/9)+e+1721013.5+((a/60+r)/60+n)/24}function n(t,e){var n=t.data.realTime?t.data.realTime:Date.now();s=t.data.satelineInfoArr;for(var i=s.length,c=0;c<i;c++)if(!a[s[c].sateObjArrIndex]||!a[s[c].sateObjArrIndex].extra){var h=r.twoline2satrec(s[c].tle1,s[c].tle2);s[c].extra=h,a[c]={extra:h}}return o(n,t.data.timestamp)}var r=function(){function t(t,o){var e,n,r,a,c,h,u,d,f,p,l,M,g,m,x,v,y,b=o.init,z=o.ep,w=o.inclp,_=o.nodep,j=o.argpp,T=o.mp,C=o.opsmode;u=t.e3;var I=t.ee2;n=t.peo,e=t.pgho,r=t.pho,a=t.pinco;var q=t.plo;M=t.se2;var F=t.se3;g=t.sgh2;var k=t.sgh3,O=t.sgh4;m=t.sh2;var E=t.sh3;v=t.si2;var P=t.si3;y=t.sl2;var A=t.sl3,U=t.sl4,S=t.t;d=t.xgh2;var W=t.xgh3,B=t.xgh4;f=t.xh2;var D=t.xh3;p=t.xi2;var J=t.xi3;l=t.xl2;var V=t.xl3,Y=t.xl4,H=t.zmol;return h=t.zmos,c=h+119459e-10*S,"y"===b&&(c=h),h=c+.0335*Math.sin(c),x=Math.sin(h),c=.5*x*x-.25,h=-.5*x*Math.cos(h),M=M*c+F*h,v=v*c+P*h,y=y*c+A*h+U*x,g=g*c+k*h+O*x,m=m*c+E*h,c=H+.00015835218*S,"y"===b&&(c=H),h=c+.1098*Math.sin(c),x=Math.sin(h),c=.5*x*x-.25,h=-.5*x*Math.cos(h),u=M+(I*c+u*h),p=v+(p*c+J*h),l=y+(l*c+V*h+Y*x),d=g+(d*c+W*h+B*x),f=m+(f*c+D*h),"n"===b&&(p-=a,l-=q,d-=e,f-=r,w+=p,z+=u-n,r=Math.sin(w),n=Math.cos(w),.2<=w?(f/=r,j+=d-n*f,_+=f,T+=l):(a=Math.sin(_),e=Math.cos(_),b=r*a+(f*e+p*n*a),e=r*e+(-f*a+p*n*e),_%=i,0>_&&"a"===C&&(_+=i),r=l+d-p*_*r,j=T+j+n*_+r,r=_,_=Math.atan2(b,e),0>_&&"a"===C&&(_+=i),Math.abs(r-_)>s&&(_=_<r?_+i:_-i),T+=l,j=j-T-n*_)),{ep:z,inclp:w,nodep:_,argpp:j,mp:T}}function o(t){return t=(t-2451545)/36525,t=(-62e-7*t*t*t+.093104*t*t+3164400184.812866*t+67310.54841)*c/240%i,0>t&&(t+=i),t}function e(t,o,e,n,r,a){return 367*t-Math.floor(1.75*(t+Math.floor((o+9)/12)))+Math.floor(275*o/9)+e+1721013.5+((a/60+r)/60+n)/24}function n(o,e){var n,r,a,c,u,f,p,l,M,g,m,x,v,y,b,z,w,_,j,T,C,I,q,F,k,O,E,P,A,U,S,W,B,D,J,V,Y,H,N,R,G,K,L,Q,X,Z,$,tt,ot,et,nt,rt,at,st,it,ct,ht,ut,dt,ft,pt,lt,Mt,gt,mt,xt,vt,yt,bt,zt,wt,_t,jt,Tt,Ct,It=0,qt=6378.137*h/60;o.t=e,o.error=0,zt=o.mo+o.mdot*o.t;var Ft=o.argpo+o.argpdot*o.t;if(jt=o.nodeo+o.nodedot*o.t,D=Ft,Mt=zt,Q=o.t*o.t,mt=jt+o.nodecf*Q,rt=1-o.cc1*o.t,at=o.bstar*o.cc4*o.t,st=o.t2cof*Q,1!==o.isimp){A=o.omgcof*o.t;var kt=1+o.eta*Math.cos(zt);P=o.xmcof*(kt*kt*kt-o.delmo),ot=A+P,Mt=zt+ot,D=Ft-ot,X=Q*o.t,Z=X*o.t,rt=rt-o.d2*Q-o.d3*X-o.d4*Z,at+=o.bstar*o.cc5*(Math.sin(Mt)-o.sinmao),st=st+o.t3cof*X+Z*(o.t4cof+o.t*o.t5cof)}gt=o.no;var Ot=o.ecco;if(lt=o.inclo,"d"===o.method){$=o.t;var Et,Pt,At,Ut,St,Wt,Bt,Dt,Jt,Vt,Yt=o.irez,Ht=o.d2201,Nt=o.d2211,Rt=o.d3210,Gt=o.d3222,Kt=o.d4410,Lt=o.d4422,Qt=o.d5220,Xt=o.d5232,Zt=o.d5421,$t=o.d5433,to=o.dedt,oo=o.del1,eo=o.del2,no=o.del3,ro=o.didt,ao=o.dmdt,so=o.dnodt,io=o.domdt,co=o.argpo,ho=o.argpdot,uo=o.t,fo=o.xfact,po=o.xlamo,lo=o.no,Mo=o.atime,go=Ot,mo=D,xo=lt,vo=o.xli,yo=Mt,bo=o.xni,zo=mt,wo=gt,_o=0;if(At=(o.gsto+.0043752690880113*$)%i,go+=to*uo,xo+=ro*uo,mo+=io*uo,zo+=so*uo,yo+=ao*uo,Pt=0,0!==Yt){(0===Mo||0>=uo*Mo||Math.abs(uo)<Math.abs(Mo))&&(Mo=0,bo=lo,vo=po),Et=0<uo?720:-720;for(var jo=381;381===jo;)2!==Yt?(Jt=oo*Math.sin(vo-.13130908)+eo*Math.sin(2*(vo-2.8843198))+no*Math.sin(3*(vo-.37448087)),Bt=bo+fo,Dt=oo*Math.cos(vo-.13130908)+2*eo*Math.cos(2*(vo-2.8843198))+3*no*Math.cos(3*(vo-.37448087))):(Vt=co+ho*Mo,St=Vt+Vt,Ut=vo+vo,Jt=Ht*Math.sin(St+vo-5.7686396)+Nt*Math.sin(vo-5.7686396)+Rt*Math.sin(Vt+vo-.95240898)+Gt*Math.sin(-Vt+vo-.95240898)+Kt*Math.sin(St+Ut-1.8014998)+Lt*Math.sin(Ut-1.8014998)+Qt*Math.sin(Vt+vo-1.050833)+Xt*Math.sin(-Vt+vo-1.050833)+Zt*Math.sin(Vt+Ut-4.4108898)+$t*Math.sin(-Vt+Ut-4.4108898),Bt=bo+fo,Dt=Ht*Math.cos(St+vo-5.7686396)+Nt*Math.cos(vo-5.7686396)+Rt*Math.cos(Vt+vo-.95240898)+Gt*Math.cos(-Vt+vo-.95240898)+Qt*Math.cos(Vt+vo-1.050833)+Xt*Math.cos(-Vt+vo-1.050833)+2*(Kt*Math.cos(St+Ut-1.8014998)+Lt*Math.cos(Ut-1.8014998)+Zt*Math.cos(Vt+Ut-4.4108898)+$t*Math.cos(-Vt+Ut-4.4108898))),Dt*=Bt,720<=Math.abs(uo-Mo)?jo=381:(Pt=uo-Mo,jo=0),381===jo&&(vo=vo+Bt*Et+259200*Jt,bo=bo+Jt*Et+259200*Dt,Mo+=Et);wo=bo+Jt*Pt+Dt*Pt*Pt*.5,Wt=vo+Bt*Pt+Jt*Pt*Pt*.5,yo=1!==Yt?Wt-2*zo+2*At:Wt-zo-mo+At,_o=wo-lo,wo=lo+_o}n=go,r=mo,a=xo,c=yo,u=zo,f=wo,Ot=n,D=r,lt=a,Mt=c,mt=u,gt=f}if(0>=gt)return o.error=2,[!1,!1];if(p=Math.pow(h/gt,d)*rt*rt,gt=h/Math.pow(p,1.5),1<=(Ot-=at)||-.001>Ot)return o.error=1,[!1,!1];1e-6>Ot&&(Ot=1e-6),Mt+=o.no*st,yt=Mt+D+mt,mt%=i,D%=i,yt%=i,Mt=(yt-D-mt)%i,x=Math.sin(lt),m=Math.cos(lt);var To=Ot;if(vt=lt,J=D,Ct=mt,bt=Mt,I=x,C=m,"d"===o.method){var Co=t(o,{inclo:o.inclo,init:"n",ep:To,inclp:vt,nodep:Ct,argpp:J,mp:bt,opsmode:o.operationmod}),To=Co.ep;if(vt=Co.inclp,Ct=Co.nodep,J=Co.argpp,bt=Co.mp,0>vt&&(vt=-vt,Ct+=s,J-=s),0>To||1<To)return o.error=3,[!1,!1]}"d"===o.method&&(I=Math.sin(vt),C=Math.cos(vt),o.aycof=.0011694452793710002*I,1.5e-12<Math.abs(C+1)?o.xlcof=.0005847226396855001*I*(3+5*C)/(1+C):o.xlcof=.0005847226396855001*I*(3+5*C)/1.5e-12),l=To*Math.cos(J),ot=1/(p*(1-To*To)),M=To*Math.sin(J)+ot*o.aycof,W=it=(bt+J+Ct+ot*o.xlcof*l-Ct)%i,tt=9999.9;for(var Io=1;1e-12<=Math.abs(tt)&&10>=Io;)_=Math.sin(W),w=Math.cos(W),tt=1-w*l-_*M,tt=(it-M*w+l*_-W)/tt,.95<=Math.abs(tt)&&(tt=0<tt?.95:-.95),W+=tt,Io+=1;if(U=l*w+M*_,B=l*_-M*w,S=l*l+M*M,0>(V=p*(1-S)))return o.error=4,[!1,!1];R=p*(1-U),N=Math.sqrt(p)*B/R,K=Math.sqrt(V)/R,g=Math.sqrt(1-S),ot=B/(1+g),E=p/R*(_-M-l*ot),O=p/R*(w-l+M*ot),L=Math.atan2(E,O),z=(O+O)*E,b=1-2*E*E,ot=1/V,et=.000541314994525*ot,nt=et*ot,"d"===o.method&&(q=C*C,o.con41=3*q-1,o.x1mth2=1-q,o.x7thm1=7*q-1),It=R*(1-1.5*nt*g*o.con41)+.5*et*o.x1mth2*b,L-=.25*nt*o.x7thm1*z,Tt=Ct+1.5*nt*C*z,xt=vt+1.5*nt*C*I*b;var qo=N-gt*et*o.x1mth2*z/h;return G=K+gt*et*(o.x1mth2*b+1.5*o.con41)/h,k=Math.sin(L),F=Math.cos(L),y=Math.sin(Tt),v=Math.cos(Tt),T=Math.sin(xt),j=Math.cos(xt),wt=-y*j,_t=v*j,ct=wt*k+v*F,ht=_t*k+y*F,ut=T*k,dt=wt*F-v*k,ft=_t*F-y*k,pt=T*F,Y={x:0,y:0,z:0},Y.x=It*ct*6378.137,Y.y=It*ht*6378.137,Y.z=It*ut*6378.137,H={x:0,y:0,z:0},H.x=(qo*ct+G*dt)*qt,H.y=(qo*ht+G*ft)*qt,H.z=(qo*ut+G*pt)*qt,1>It?(o.error=6,{position:!1,velocity:!1}):{position:Y,velocity:H}}function r(t){var o=t.longitude,e=t.latitude,n=t.height,r=6378.137/Math.sqrt(1-.006694380004260718*Math.sin(e)*Math.sin(e));return t=(r+n)*Math.cos(e)*Math.cos(o),o=(r+n)*Math.cos(e)*Math.sin(o),e=(.9933056199957393*r+n)*Math.sin(e),{x:t,y:o,z:e}}var a={version:"1.2"},s=Math.PI,i=2*s,c=s/180,h=60/Math.sqrt(650944.0944816993),u=1/h,d=2/3;return a.gstime_from_jday=function(t){return o(t)},a.gstime_from_date=function(t,n,r,a,s,i){return t=e(t,n,r,a,s,i),o(t)},a.twoline2satrec=function(r,a){var f,p,l,M,g,m,x,v,y,b,z,w,_,j,T,C,I,q,F,k,O,E,P,A,U,S,W,B,D,J,V,Y,H,N,R,G,K,L,Q,X,Z,$,tt,ot,et,nt,rt,at,st,it,ct,ht,ut,dt,ft,pt,lt,Mt,gt,mt,xt,vt,yt,bt,zt,wt,_t,jt,Tt,Ct,It,qt,Ft,kt,Ot,Et,Pt,At,Ut,St,Wt,Bt,Dt,Jt=1440/(2*s),Vt=0,Yt={error:0};parseInt(r.substring(0,1),10),Yt.satnum=r.substring(2,7),r.substring(7,8),r.substring(9,11),Yt.epochyr=parseInt(r.substring(18,20),10),Yt.epochdays=parseFloat(r.substring(20,32)),Yt.ndot=parseFloat(r.substring(33,43)),Yt.nddot=parseFloat("."+parseInt(r.substring(44,50),10)+"E"+r.substring(50,52)),Yt.bstar=parseFloat(r.substring(53,54)+"."+parseInt(r.substring(54,59),10)+"E"+r.substring(59,61)),parseInt(r.substring(62,63),10),parseInt(r.substring(64,68),10),Yt.inclo=parseFloat(a.substring(8,16)),Yt.nodeo=parseFloat(a.substring(17,25)),Yt.ecco=parseFloat("."+a.substring(26,33)),Yt.argpo=parseFloat(a.substring(34,42)),Yt.mo=parseFloat(a.substring(43,51)),Yt.no=parseFloat(a.substring(52,63)),parseFloat(a.substring(63,68)),Yt.no/=Jt,Yt.a=Math.pow(Yt.no*u,-2/3),Yt.ndot/=1440*Jt,Yt.nddot/=2073600*Jt,Yt.inclo*=c,Yt.nodeo*=c,Yt.argpo*=c,Yt.mo*=c,Yt.alta=Yt.a*(1+Yt.ecco)-1,Yt.altp=Yt.a*(1-Yt.ecco)-1;var Vt=57>Yt.epochyr?Yt.epochyr+2e3:Yt.epochyr+1900,Ht=Yt.epochdays,Nt=[31,28,31,30,31,30,31,31,30,31,30,31],Rt=Math.floor(Ht);0==Vt%4&&(Nt=[31,29,31,30,31,30,31,31,30,31,30,31]);for(var Gt=1,Kt=0;Rt>Kt+Nt[Gt-1]&&12>Gt;)Kt+=Nt[Gt-1],Gt+=1;var Lt=Gt,Qt=Rt-Kt,Xt=24*(Ht-Rt),Zt=Math.floor(Xt),Xt=60*(Xt-Zt),$t=Math.floor(Xt);Yt.jdsatepoch=e(Vt,Lt,Qt,Zt,$t,60*(Xt-$t));var to,oo,eo,no,ro,ao,so,io,co,ho,uo,fo,po,lo,Mo,go,mo,xo,vo,yo,bo,zo=Yt.jdsatepoch-2433281.5,wo=Yt.bstar,_o=Yt.ecco,jo=Yt.argpo,To=Yt.inclo,Co=Yt.mo,Io=Yt.no,qo=Yt.nodeo;Yt.isimp=0,Yt.method="n",Yt.aycof=0,Yt.con41=0,Yt.cc1=0,Yt.cc4=0,Yt.cc5=0,Yt.d2=0,Yt.d3=0,Yt.d4=0,Yt.delmo=0,Yt.eta=0,Yt.argpdot=0,Yt.omgcof=0,Yt.sinmao=0,Yt.t=0,Yt.t2cof=0,Yt.t3cof=0,Yt.t4cof=0,Yt.t5cof=0,Yt.x1mth2=0,Yt.x7thm1=0,Yt.mdot=0,Yt.nodedot=0,Yt.xlcof=0,Yt.xmcof=0,Yt.nodecf=0,Yt.irez=0,Yt.d2201=0,Yt.d2211=0,Yt.d3210=0,Yt.d3222=0,Yt.d4410=0,Yt.d4422=0,Yt.d5220=0,Yt.d5232=0,Yt.d5421=0,Yt.d5433=0,Yt.dedt=0,Yt.del1=0,Yt.del2=0,Yt.del3=0,Yt.didt=0,Yt.dmdt=0,Yt.dnodt=0,Yt.domdt=0,Yt.e3=0,Yt.ee2=0,Yt.peo=0,Yt.pgho=0,Yt.pho=0,Yt.pinco=0,Yt.plo=0,Yt.se2=0,Yt.se3=0,Yt.sgh2=0,Yt.sgh3=0,Yt.sgh4=0,Yt.sh2=0,Yt.sh3=0,Yt.si2=0,Yt.si3=0,Yt.sl2=0,Yt.sl3=0,Yt.sl4=0,Yt.gsto=0,Yt.xfact=0,Yt.xgh2=0,Yt.xgh3=0,Yt.xgh4=0,Yt.xh2=0,Yt.xh3=0,Yt.xi2=0,Yt.xi3=0,Yt.xl2=0,Yt.xl3=0,Yt.xl4=0,Yt.xlamo=0,Yt.zmol=0,Yt.zmos=0,Yt.atime=0,Yt.xli=0,Yt.xni=0,Yt.bstar=wo,Yt.ecco=_o,Yt.argpo=jo,Yt.inclo=To,Yt.mo=Co,Yt.no=Io,Yt.nodeo=qo,Yt.operationmode="i";Yt.init="y",Yt.t=0;var Fo,ko,Oo,Eo,Po,Ao=Yt.ecco,Uo=Yt.inclo,So=Yt.no,Wo=Yt.operationmode,Bo=Ao*Ao,Do=1-Bo,Jo=Math.sqrt(Do),Vo=Math.cos(Uo),Yo=Vo*Vo;Fo=Math.pow(h/So,d),ko=.0008119724917875*(3*Yo-1)/(Jo*Do);var Ho=ko/(Fo*Fo);Oo=Fo*(1-Ho*Ho-Ho*(1/3+134*Ho*Ho/81));var Ho=ko/(Oo*Oo),So=So/(1+Ho),No=Math.pow(h/So,d),Ro=Math.sin(Uo);Eo=No*Do;var Go=1-5*Yo,Ko=-Go-Yo-Yo,Lo=Eo*Eo,Qo=No*(1-Ao);if("a"===Wo){var Xo=zo-7305,Zo=Math.floor(Xo+1e-8);Po=(1.7321343856509375+.017202791694070362*Zo+(.017202791694070362+i)*(Xo-Zo)+Xo*Xo*5.075514194322695e-15)%i,0>Po&&(Po+=i)}else Po=o(zo+2433281.5);if(Bt=So,Dt=Po,Yt.no=Bt,Yt.con41=Ko,Yt.gsto=Dt,Yt.error=0,0<=Do||0<=Yt.no){if(Yt.isimp=0,Qo<220/6378.137+1&&(Yt.isimp=1),lo=78/6378.137+1,po=1.8802768006108976e-9,156>(ho=6378.137*(Qo-1))){lo=ho-78,98>ho&&(lo=20);var $o=(120-lo)/6378.137;po=$o*$o*$o*$o,lo=lo/6378.137+1}uo=1/Lo,vo=1/(No-lo),Yt.eta=No*Yt.ecco*vo,io=Yt.eta*Yt.eta,so=Yt.ecco*Yt.eta,fo=Math.abs(1-io),no=po*Math.pow(vo,4),ro=no/Math.pow(fo,3.5),oo=ro*Yt.no*(No*(1+1.5*io+so*(4+io))+.00040598624589375*vo/fo*Yt.con41*(8+3*io*(8+io))),Yt.cc1=Yt.bstar*oo,eo=0,1e-4<Yt.ecco&&(eo=-2*no*vo*-.0023388905587420003*Yt.no*Ro/Yt.ecco),Yt.x1mth2=1-Yo,Yt.cc4=2*Yt.no*ro*No*Do*(Yt.eta*(2+.5*io)+Yt.ecco*(.5+2*io)-.00108262998905*vo/(No*fo)*(-3*Yt.con41*(1-2*so+io*(1.5-.5*so))+.75*Yt.x1mth2*(2*io-so*(1+io))*Math.cos(2*Yt.argpo))),Yt.cc5=2*ro*No*Do*(1+2.75*(io+so)+so*io),ao=Yo*Yo,go=.001623944983575*uo*Yt.no,mo=.000541314994525*go*uo,xo=7.551504421875001e-7*uo*uo*Yt.no,Yt.mdot=Yt.no+.5*go*Jo*Yt.con41+.0625*mo*Jo*(13-78*Yo+137*ao),Yt.argpdot=-.5*go*Go+.0625*mo*(7-114*Yo+395*ao)+xo*(3-36*Yo+49*ao),bo=-go*Vo,Yt.nodedot=bo+(.5*mo*(4-19*Yo)+2*xo*(3-7*Yo))*Vo,yo=Yt.argpdot+Yt.nodedot,Yt.omgcof=Yt.bstar*eo*Math.cos(Yt.argpo),Yt.xmcof=0,1e-4<Yt.ecco&&(Yt.xmcof=-2/3*no*Yt.bstar/so),Yt.nodecf=3.5*Do*bo*Yt.cc1,Yt.t2cof=1.5*Yt.cc1,1.5e-12<Math.abs(Vo+1)?Yt.xlcof=.0005847226396855001*Ro*(3+5*Vo)/(1+Vo):Yt.xlcof=.0005847226396855001*Ro*(3+5*Vo)/1.5e-12,Yt.aycof=.0011694452793710002*Ro;var te=1+Yt.eta*Math.cos(Yt.mo);if(Yt.delmo=te*te*te,Yt.sinmao=Math.sin(Yt.mo),Yt.x7thm1=7*Yo-1,225<=2*s/Yt.no){Yt.method="d",Yt.isimp=1,co=Yt.inclo;var oe,ee,ne,re,ae,se,ie,ce,he,ue,de,fe,pe,le,Me,ge,me,xe,ve,ye,be,ze,we,_e,je,Te,Ce,Ie,qe,Fe,ke,Oe,Ee,Pe,Ae,Ue,Se,We,Be,De,Je,Ve,Ye,He,Ne,Re,Ge,Ke,Le,Qe,Xe,Ze,$e,tn,on,en,nn,rn,an,sn,cn,hn,un,dn,fn,pn,ln,Mn,gn,mn,xn,vn,yn,bn,zn,wn=Yt.argpo,_n=Yt.inclo,jn=Yt.nodeo,Tn=Yt.e3,Cn=Yt.ee2,In=Yt.peo,qn=Yt.pgho,Fn=Yt.pho,kn=Yt.pinco,On=Yt.plo,En=Yt.se2,Pn=Yt.se3,An=Yt.sgh2,Un=Yt.sgh3,Sn=Yt.sgh4,Wn=Yt.sh2,Bn=Yt.sh3,Dn=Yt.si2,Jn=Yt.si3,Vn=Yt.sl2,Yn=Yt.sl3,Hn=Yt.sl4,Nn=Yt.xgh2,Rn=Yt.xgh3,Gn=Yt.xgh4,Kn=Yt.xh2,Ln=Yt.xh3,Qn=Yt.xi2,Xn=Yt.xi3,Zn=Yt.xl2,$n=Yt.xl3,tr=Yt.xl4,or=Yt.zmol,er=Yt.zmos,nr=Yt.no,rr=Yt.ecco,ar=Math.sin(jn),sr=Math.cos(jn),ir=Math.sin(wn),cr=Math.cos(wn),hr=Math.sin(_n),ur=Math.cos(_n),dr=rr*rr;de=1-dr;var fr=Math.sqrt(de),Fn=qn=On=kn=In=0,pr=zo+18261.5+0;we=(4.523602-.00092422029*pr)%i,le=Math.sin(we),pe=Math.cos(we),Ae=.91375164-.03568096*pe,Ue=Math.sqrt(1-Ae*Ae),Oe=.089683511*le/Ue,ke=Math.sqrt(1-Oe*Oe);var lr=5.8351514+.001944368*pr;Se=.39785416*le/Ue,Se=Math.atan2(Se,ke*pe+.91744867*Oe*le),Se=lr+Se-we,Ce=Math.cos(Se),Ie=Math.sin(Se),je=.1945905,Te=-.98088458,Ee=.91744867,Pe=.39785416,qe=sr,Fe=ar,fe=29864797e-13,_e=1/nr;for(var Mr=0;2>Mr;)Mr+=1,oe=je*qe+Te*Ee*Fe,ne=-Te*qe+je*Ee*Fe,ie=-je*Fe+Te*Ee*qe,ce=Te*Pe,he=Te*Fe+je*Ee*qe,ue=je*Pe,ee=ur*ie+hr*ce,re=ur*he+hr*ue,ae=-hr*ie+ur*ce,se=-hr*he+ur*ue,Me=oe*cr+ee*ir,ge=ne*cr+re*ir,me=-oe*ir+ee*cr,xe=-ne*ir+re*cr,ve=ae*ir,ye=se*ir,be=ae*cr,ze=se*cr,yn=12*Me*Me-3*me*me,bn=24*Me*ge-6*me*xe,zn=12*ge*ge-3*xe*xe,dn=3*(oe*oe+ee*ee)+yn*dr,fn=6*(oe*ne+ee*re)+bn*dr,pn=3*(ne*ne+re*re)+zn*dr,ln=-6*oe*ae+dr*(-24*Me*be-6*me*ve),Mn=-6*(oe*se+ne*ae)+dr*(-24*(ge*be+Me*ze)+-6*(me*ye+xe*ve)),gn=-6*ne*se+dr*(-24*ge*ze-6*xe*ye),mn=6*ee*ae+dr*(24*Me*ve-6*me*be),xn=6*(re*ae+ee*se)+dr*(24*(ge*ve+Me*ye)-6*(xe*be+me*ze)),vn=6*re*se+dr*(24*ge*ye-6*xe*ze),dn=dn+dn+de*yn,fn=fn+fn+de*bn,pn=pn+pn+de*zn,an=fe*_e,rn=-.5*an/fr,sn=an*fr,nn=-15*rr*sn,cn=Me*me+ge*xe,hn=ge*me+Me*xe,un=ge*xe-Me*me,1===Mr&&(We=nn,Be=rn,De=an,Je=sn,Ve=cn,Ye=hn,He=un,Ne=dn,Re=fn,Ge=pn,Ke=ln,Le=Mn,Qe=gn,Xe=mn,Ze=xn,$e=vn,tn=yn,on=bn,en=zn,je=Ce,Te=Ie,Ee=Ae,Pe=Ue,qe=ke*sr+Oe*ar,Fe=ar*ke-sr*Oe,fe=4.7968065e-7);or=(4.7199672+.2299715*pr-lr)%i,er=(6.2565837+.017201977*pr)%i,En=2*We*Ye,Pn=2*We*He,Dn=2*Be*Le,Jn=2*Be*(Qe-Ke),Vn=-2*De*Re,Yn=-2*De*(Ge-Ne),Hn=-2*De*(-21-9*dr)*.01675,An=2*Je*on,Un=2*Je*(en-tn),Sn=-.3015*Je,Wn=-2*Be*Ze,Bn=-2*Be*($e-Xe),Cn=2*nn*hn,Tn=2*nn*un,Qn=2*rn*Mn,Xn=2*rn*(gn-ln),Zn=-2*an*fn,$n=-2*an*(pn-dn),tr=-2*an*(-21-9*dr)*.0549,Nn=2*sn*bn,Rn=2*sn*(zn-yn),Gn=-.9882*sn,Kn=-2*rn*xn,Ln=-2*rn*(vn-mn),U=Tn,S=Cn,W=In,B=qn,D=Fn,J=kn,V=On,Y=En,H=Pn,N=An,R=Un,G=Sn,K=Wn,L=Bn,Q=Dn,X=Jn,Z=Vn,$=Yn,tt=Hn,ot=nn,et=rn,nt=an,rt=sn,at=cn,st=We,it=Be,ct=De,ht=Je,ut=Ve,dt=Ne,ft=Ge,pt=Ke,lt=Qe,Mt=Xe,gt=$e,mt=tn,xt=en,vt=Nn,yt=Rn,bt=Gn,zt=Kn,wt=Ln,_t=Qn,jt=Xn,Tt=Zn,Ct=$n,It=tr,qt=dn,Ft=pn,kt=ln,Ot=gn,Et=mn,Pt=vn,At=yn,Ut=zn,St=or,Wt=er,Yt.e3=U,Yt.ee2=S,Yt.peo=W,Yt.pgho=B,Yt.pho=D,Yt.pinco=J,Yt.plo=V,Yt.se2=Y,Yt.se3=H,Yt.sgh2=N,Yt.sgh3=R,Yt.sgh4=G,Yt.sh2=K,Yt.sh3=L,Yt.si2=Q,Yt.si3=X,Yt.sl2=Z,Yt.sl3=$,Yt.sl4=tt,Yt.xgh2=vt,Yt.xgh3=yt,Yt.xgh4=bt,Yt.xh2=zt,Yt.xh3=wt,Yt.xi2=_t,Yt.xi3=jt,Yt.xl2=Tt,Yt.xl3=Ct,Yt.xl4=It,Yt.zmol=St,Yt.zmos=Wt;var gr=t(Yt,{inclo:co,init:Yt.init,ep:Yt.ecco,inclp:Yt.inclo,nodep:Yt.nodeo,argpp:Yt.argpo,mp:Yt.mo,opsmode:Yt.operationmode});Yt.ecco=gr.ep,Yt.inclo=gr.inclp,Yt.nodeo=gr.nodep,Yt.argpo=gr.argpp,Yt.mo=gr.mp;var mr,xr,vr,yr,br,zr,wr,_r,jr,Tr,Cr,Ir,qr,Fr,kr,Or,Er,Pr,Ar,Ur,Sr,Wr,Br,Dr,Jr,Vr,Yr,Hr,Nr,Rr,Gr,Kr,Lr,Qr=dr,Xr=Yt.argpo,Zr=Yt.t,$r=Yt.gsto,ta=Yt.mo,oa=Yt.mdot,ea=Yt.no,na=Yt.nodeo,ra=Yt.nodedot,aa=Yt.ecco,sa=rr,ia=co,ca=nr,ha=Yt.irez,ua=Yt.atime,da=Yt.d2201,fa=Yt.d2211,pa=Yt.d3210,la=Yt.d3222,Ma=Yt.d4410,ga=Yt.d4422,ma=Yt.d5220,xa=Yt.d5232,va=Yt.d5421,ya=Yt.d5433,ba=Yt.dedt,za=Yt.didt,wa=Yt.dmdt,_a=Yt.dnodt,ja=Yt.domdt,Ta=Yt.del1,Ca=Yt.del2,Ia=Yt.del3,qa=Yt.xfact,Fa=Yt.xlamo,ka=Yt.xli,Oa=Yt.xni,ha=0;.0034906585<ca<.0052359877&&(ha=1),.00826<=ca<=.00924&&.5<=sa&&(ha=2);var Ea=119459e-10*st*ut,Pa=119459e-10*it*(pt+lt),Aa=-119459e-10*ct*(dt+ft-14-6*Qr),Ua=119459e-10*ht*(mt+xt-6),Sa=-119459e-10*it*(Mt+gt);(.052359877>ia||ia>s-.052359877)&&(Sa=0),0!==hr&&(Sa/=hr);var Wa=Ua-ur*Sa,ba=Ea+.00015835218*ot*at,za=Pa+.00015835218*et*(kt+Ot),wa=Aa-.00015835218*nt*(qt+Ft-14-6*Qr),Ba=.00015835218*rt*(At+Ut-6),Da=-.00015835218*et*(Et+Pt);if((.052359877>ia||ia>s-.052359877)&&(Da=0),ja=Wa+Ba,_a=Sa,0!==hr&&(ja-=ur/hr*Da,_a+=Da/hr),Hr=($r+0)%i,sa+=ba*Zr,ia+=za*Zr,0!==ha){if(Gr=Math.pow(ca/h,2/3),2===ha){Kr=ur*ur;var Ja=sa,sa=aa,Va=Qr,Qr=Bo;Lr=sa*Qr,Fr=-.306-.44*(sa-.64),.65>=sa?(kr=3.616-13.247*sa+16.29*Qr,Er=117.39*sa-19.302-228.419*Qr+156.591*Lr,Pr=109.7927*sa-18.9068-214.6334*Qr+146.5816*Lr,Ar=242.694*sa-41.122-471.094*Qr+313.953*Lr,Ur=841.88*sa-146.407-1629.014*Qr+1083.435*Lr,Sr=3017.977*sa-532.114-5740.032*Qr+3708.276*Lr):(kr=331.819*sa-72.099-508.738*Qr+266.724*Lr,Er=1582.851*sa-346.844-2415.925*Qr+1246.113*Lr,Pr=1554.908*sa-342.585-2366.899*Qr+1215.972*Lr,Ar=4758.686*sa-1052.797-7193.992*Qr+3651.957*Lr,Ur=16178.11*sa-3581.69-24462.77*Qr+12422.52*Lr,Sr=.715<sa?29936.92*sa-5149.66-54087.36*Qr+31324.56*Lr:1464.74-4664.75*sa+3763.64*Qr),.7>sa?(Dr=4988.61*sa-919.2277-9064.77*Qr+5542.21*Lr,Wr=4568.6173*sa-822.71072-8491.4146*Qr+5337.524*Lr,Br=4690.25*sa-853.666-8624.77*Qr+5341.4*Lr):(Dr=161616.52*sa-37995.78-229838.2*Qr+109377.94*Lr,Wr=218913.95*sa-51752.104-309468.16*Qr+146349.42*Lr,Br=170470.89*sa-40023.88-242699.48*Qr+115605.82*Lr),Jr=hr*hr,mr=.75*(1+2*ur+Kr),xr=1.5*Jr,yr=1.875*hr*(1-2*ur-3*Kr),br=-1.875*hr*(1+2*ur-3*Kr),wr=35*Jr*mr,_r=39.375*Jr*Jr,jr=9.84375*hr*(Jr*(1-2*ur-5*Kr)+.33333333*(4*ur-2+6*Kr)),Tr=hr*(4.92187512*Jr*(-2-4*ur+10*Kr)+6.56250012*(1+2*ur-3*Kr)),Cr=29.53125*hr*(2-8*ur+Kr*(8*ur-12+10*Kr)),Ir=29.53125*hr*(-2-8*ur+Kr*(12+8*ur-10*Kr)),Nr=ca*ca,Rr=Gr*Gr,Yr=3*Nr*Rr,Vr=17891679e-13*Yr,da=Vr*mr*Fr,fa=Vr*xr*kr,Yr*=Gr,Vr=3.7393792e-7*Yr,pa=Vr*yr*Er,la=Vr*br*Pr,Yr*=Gr,Vr=1.47273906e-8*Yr,Ma=Vr*wr*Ar,ga=Vr*_r*Ur,Yr*=Gr,Vr=1.1428639e-7*Yr,ma=Vr*jr*Sr,xa=Vr*Tr*Br,Vr=4.3531606e-9*Yr,va=Vr*Cr*Wr,ya=Vr*Ir*Dr,Fa=(ta+na+na-Hr-Hr)%i,qa=oa+wa+2*(ra+_a-.0043752690880113)-ea,sa=Ja,Qr=Va}1===ha&&(qr=1+Qr*(.8125*Qr-2.5),Er=1+2*Qr,Or=1+Qr*(6.60937*Qr-6),mr=.75*(1+ur)*(1+ur),vr=.9375*hr*hr*(1+3*ur)-.75*(1+ur),zr=1+ur,zr*=1.875*zr*zr,Ta=3*ca*ca*Gr*Gr,Ca=2*Ta*mr*qr*17891679e-13,Ia=3*Ta*zr*Or*2.2123015e-7*Gr,Ta=Ta*vr*Er*21460748e-13*Gr,Fa=(ta+na+Xr-Hr)%i,qa=oa+yo-.0043752690880113+wa+ja+_a-ea),ka=Fa,Oa=ea,ua=0,ca=ea+0}f=ha,p=ua,l=da,M=fa,g=pa,m=la,x=Ma,v=ga,y=ma,b=xa,z=va,w=ya,_=ba,j=za,T=wa,C=_a,I=ja,q=Ta,F=Ca,k=Ia,O=qa,E=Fa,P=ka,A=Oa,Yt.irez=f,Yt.atime=p,Yt.d2201=l,Yt.d2211=M,Yt.d3210=g,Yt.d3222=m,Yt.d4410=x,Yt.d4422=v,Yt.d5220=y,Yt.d5232=b,Yt.d5421=z,Yt.d5433=w,Yt.dedt=_,Yt.didt=j,Yt.dmdt=T,Yt.dnodt=C,Yt.domdt=I,Yt.del1=q,Yt.del2=F,Yt.del3=k,Yt.xfact=O,Yt.xlamo=E,Yt.xli=P,Yt.xni=A}1!==Yt.isimp&&(to=Yt.cc1*Yt.cc1,Yt.d2=4*No*vo*to,Mo=Yt.d2*vo*Yt.cc1/3,Yt.d3=(17*No+lo)*Mo,Yt.d4=.5*Mo*No*vo*(221*No+31*lo)*Yt.cc1,Yt.t3cof=Yt.d2+2*to,Yt.t4cof=.25*(3*Yt.d3+Yt.cc1*(12*Yt.d2+10*to)),Yt.t5cof=.2*(3*Yt.d4+12*Yt.cc1*Yt.d3+6*Yt.d2*Yt.d2+15*to*(2*Yt.d2+to)))}return n(Yt,0),Yt.init="n",Yt},a.propagate=function(t,o,r,a,s,i,c){return o=1440*(e(o,r,a,s,i,c)-t.jdsatepoch),n(t,o)},a.sgp4=function(t,o){return n(t,o)},a.eci_to_geodetic=function(t,o){for(var e,n=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)-o,a=0,s=Math.atan2(t.z,Math.sqrt(t.x*t.x+t.y*t.y));20>a;)e=1/Math.sqrt(1-.006694380004260718*Math.sin(s)*Math.sin(s)),s=Math.atan2(t.z+42.69767279723544*e*Math.sin(s),n),a+=1;return n=n/Math.cos(s)-6378.137*e,{longitude:r,latitude:s,height:n}},a.ecf_to_look_angles=function(t,o){var e,n=t.longitude,a=t.latitude,i=r(t);e=o.x-i.x;var c=o.y-i.y,h=o.z-i.z,i=Math.sin(a)*Math.cos(n)*e+Math.sin(a)*Math.sin(n)*c-Math.cos(a)*h,u=-Math.sin(n)*e+Math.cos(n)*c,n=Math.cos(a)*Math.cos(n)*e+Math.cos(a)*Math.sin(n)*c+Math.sin(a)*h;return e={top_s:i,top_e:u,top_z:n},n=e.top_s,a=e.top_e,c=e.top_z,e=Math.sqrt(n*n+a*a+c*c),c=Math.asin(c/e),{azimuth:Math.atan2(-a,n)+s,elevation:c,range_sat:e}},a.geodetic_to_ecf=function(t){return r(t)},a.ecf_to_eci=function(t,o){return{x:t.x*Math.cos(o)-t.y*Math.sin(o),y:t.x*Math.sin(o)+t.y*Math.cos(o),z:t.z}},a.eci_to_ecf=function(t,o){return{x:t.x*Math.cos(o)+t.y*Math.sin(o),y:t.x*-Math.sin(o)+t.y*Math.cos(o),z:t.z}},a.degrees_lat=function(t){return t=t>s/2||t<-s/2?"Err":t/s*180},a.degrees_long=function(t){return t=t/s*180%360,180<t?t=360-t:-180>t&&(t=360+t),t},a.doppler_factor=function(t,o,e){var n=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2)+Math.pow(o.z-t.z,2));return o={x:o.x+e.x,y:o.y+e.y,z:o.z+e.z},t=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2)+Math.pow(o.z-t.z,2))-n,1+(t*=0<=t?1:-1)/299792.458},a}(),a=[],s=[];return t(n)})}();